:PROPERTIES:
:ID:       12d23b0e-3830-4a56-b1b5-33911e9df8fb
:END:
#+startup: latexpreview
#+startup: inlineimages showall
#+title: Lamportov Sat

- /Jednostavni (Lamportov) logički sat/ $C$ je preslikavanje $$ C: E \to \mathbb{N}_0 $$, $E$ je skup događaja, koje zadovoljava sljedeći uvjet:
    $$(\forall e,f \in E)(e \to f \implies C(e) < C(f))$$

- koji put je zgodnije „udarati” vremenske žigove stanjima procesa, a ne događajima
  - logički sat stoga također zadovoljava i ovakav uvjet: $$(\forall s,t \in S)(s \to t \implies C(s) < C(t))$$, gdje je $S$ *skup stanja*

[[file:./assets/pmf/distribuirano/slika_3_5.png]]

* Uređaj
- totalni uređaj dobijemo tako da vrijednosti logičkog sata proširimo identifikatorima procesa i zatim ih uspoređujemo u leksikografskom smislu
- Svako stanje “žigošemo” parom $(s.c, s.p)$, gdje je $s$ stanje
  - Totalni uređaj $<$ za stanja dobiva se ovako:
      $$(s.c < t.c) \lor ((s.c = t.c) \land (s.p < t.p)) \implies (s.c,s.p) < (t.c,t.p)$$

* Java primjer
#+begin_src java
public class LamportClock  {
    int c;

    public LamportClock()  {
        c = 1;
    }

    public int getValue()  {
        return c;
    }

    public void tick()  {  // on internal events
        c = c + 1;
    }

    public void sendAction()  {
        // include c in message
        c = c + 1;
    }

    public void receiveAction(int src, int sentValue)  {
        c = Util.max(c, sentValue) + 1;
    }
}
#+end_src
